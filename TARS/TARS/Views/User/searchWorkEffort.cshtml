@model IEnumerable<TARS.Models.WorkEffort>

@{
    ViewBag.Title = "searchWorkEffort";
}

<h2>Work Efforts</h2>

<!-- Display all of the active (not hidden) work efforts -->   
<table class="timesheet">
    <tr>
        <th>
            PcaCode
        </th>
        <th>
            EarningsCode
        </th>
        <th>
            Description
        </th>
        <th>
            StartDate
        </th>
        <th>
            EndDate
        </th>

        <th></th>
    </tr>

    @foreach (var item in Model) 
    {
        if (item.hidden == false)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.pcaCode)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.earningsCode)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.description)
                </td>
                <td>
                    @item.startDate.ToShortDateString()
                </td>
                <td>
                    @item.endDate.ToShortDateString()
                </td>

                <td>
                    <!-- If there are comments, provide a link to view them -->
                    @if ((item.comments != null) && (item.comments.Trim().Length > 0))
                    {                  
                        @Html.ActionLink("View Comments", "viewWorkEffort", new { id = item.ID })
                    }                
                </td>
            </tr>
        }
    }
</table>

<!-- if the user is has manager privileges, let them edit the work effort -->
@if (ViewBag.managerFlag == true)
{  
    <p>@Html.ActionLink("Manage Work Efforts", "WeManagement", "Manager")</p>
}

